AWSTemplateFormatVersion: 2010-09-09
Resources: 
  BastionVPC:
    Type:  AWS::EC2::VPC
    Properties: 
      CidrBlock: 10.0.0.0/16
  
  BastionSubnet:
    Type: AWS::EC2::Subnet
    Properties:
      CidrBlock: 10.0.0.0/24
      VpcId: !Ref BastionVPC
      
  InternetGateway:
    Type: AWS::EC2::InternetGateway
    Properties: {}
    
  EC2VPC:
    Type: AWS::EC2::VPCGatewayAttachment
    Properties:
      VpcId: !Ref BastionVPC
      InternetGatewayId: !Ref InternetGateway
 
  BastionTable: 
    Type: AWS::EC2::RouteTable
    Properties: 
      VpcId: !Ref BastionVPC
    DependsOn: 
      - BastionSubnet

  BastionRoute:
    Type: AWS::EC2::Route
    Properties: 
      RouteTableId: !Ref BastionTable
      GatewayId: !Ref InternetGateway
      DestinationCidrBlock: 0.0.0.0/0


  BastionHost:
    Type: AWS::EC2::Instance
    Properties:
      InstanceType: t2.micro
      ImageId: ami-0a887e401f7654935
      NetworkInterfaces: 
      - AssociatePublicIpAddress: True
        DeleteOnTermination: True
        DeviceIndex: 0
        SubnetId: !Ref BastionSubnet
      UserData: 
        Fn::Base64: |
          #!/bin/bash -xe
          yum update -y # good practice to update existing packages
          yum install -y httpd # install web server 
          systemctl start httpd
          systemctl enable httpd
          echo "Hello World" > /var/www/html/index.html       
     
    DependsOn:
      - BastionRoute

   



---------------------------------------
Above line is working
--------------------------------------- 

"BastionHost:
    Type: AWS::EC2::Instance
    Properties:
      KeyName: test <<< cant make key in CF, only reference exiting
      InstanceType: t2.micro
      ImageId: ami-0a887e401f7654935
      NetworkInterfaces: 
      - AssociatePublicIpAddress: True
        DeleteOnTermination: True
        DeviceIndex: 0
      - SubnetId: !Ref BastionSubnet "" << Why I have under Interface

Network interfaces and an instance-level subnet ID
may not be specified on the same request (Service: AmazonEC2;
Status Code: 400; Error Code: InvalidParameterCombination; 
Request ID: 16b54228-8a06-465f-becc-296a7456f6ea)



  BastionGatewayRouteTableAssociation:    
    Type: AWS::EC2::GatewayRouteTableAssociation
    Properties: 
      RouteTableId: !Ref RouteTable
      GatewayId: !Ref InternetGateway 
    
    BastionGatewayRouteTableAssociation	CREATE_FAILED	
    Route table contains unsupported route destination. 
    The unsupported route destination is less specific
    than or non-overlapping with VPC local CIDR. 
    (Service: AmazonEC2; Status Code: 400; 
    Error Code: RouteNotSupported; 
    Request ID: acc00e40-f8d3-456e-ad82-cc06a5508e00)
    
    
    

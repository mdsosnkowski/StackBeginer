AWSTemplateFormatVersion: 2010-09-09
Resources: 
  BastionVPC:
    Type:  AWS::EC2::VPC
    Properties: 
      CidrBlock: 10.0.0.0/16
  
  BastionSubnet:
    Type: AWS::EC2::Subnet
    Properties:
      CidrBlock: 10.0.0.0/24
      VpcId: !Ref BastionVPC
      
  InternetGateway:
    Type: AWS::EC2::InternetGateway
    Properties: {}
    
  EC2VPC:
    Type: AWS::EC2::VPCGatewayAttachment
    Properties:
      VpcId: !Ref BastionVPC
      InternetGatewayId: !Ref InternetGateway
      
  BastionHost:
    Type: AWS::EC2::Instance
    Properties:
      InstanceType: t2.micro
      ImageId: ami-0a887e401f7654935
      SubnetId: !Ref BastionSubnet
      

  BastionHostNetworkInterface:
    Type: AWS::EC2::NetworkInterface
    Properties:
      SubnetId: !Ref BastionSubnet
      

  
  NetworkInterfaceAttachment:
    Type: AWS::EC2::NetworkInterfaceAttachment
    Properties:
      InstanceId:
         Ref: BastionHost
      NetworkInterfaceId:
         Ref: BastionHostNetworkInterface
      DeviceIndex: 1
        

    
    
    =========
    
    
    
  InstanceSecurityGroup:
    Type: AWS::EC2::SecurityGroup
    Properties:
      GroupDescription: Allow http to client host
      VpcId:
         Ref: BastionVPC
      SecurityGroupIngress:
      - IpProtocol: tcp
        FromPort: 80
        ToPort: 80
        CidrIp: 0.0.0.0/0
      SecurityGroupEgress:
      - IpProtocol: tcp
        FromPort: 80
        ToPort: 80
        CidrIp: 0.0.0.0/0    
    
    
    
--------ABOVE IS WORKING=====   
    
    
  MyEIP:
    Type: AWS::EC2::EIP
     Properties:
       InstanceId: 
       Ref: BastionHost
            
======== NOTES ==========
https://stackoverflow.com/questions/47644034/cloudformation-error-value-of-property-networkinterfaces-must-be-a-list-of-obje
>> Network interfaces and an instance-level subnet ID may not be specified on the same request (Service: AmazonEC2; Status Code: 400; Error Code: InvalidParameterCombination; Request ID: 1598d73b-1df8-469d-9b0b-14378fd50749)

